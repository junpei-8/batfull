<script lang="ts">
  import { getAuthHeader } from '@/utils/auth';

  export let badId: string;

  async function deleteBad() {
    const response = await fetch(`/api/bads/${badId}/json`, {
      method: 'DELETE',
      headers: await getAuthHeader(),
    });

    if (response.ok) {
      location.reload();

      // ↓ エラーが発生した場合はアラートを表示する
    } else {
      alert('削除に失敗しました');
    }
  }
</script>

<button on:click={deleteBad} class="button">
  <svg
    class="icon"
    xmlns="http://www.w3.org/2000/svg"
    enable-background="new 0 0 24 24"
    viewBox="0 0 24 24"
  >
    <g>
      <path
        d="M5,17.6499c0,1.6782,1.1035,3.1577,2.7412,3.6812c1.374,0.4453,2.8174,0.668,4.2598,0.668
		c1.4414,0,2.8828-0.2222,4.2539-0.6665C17.8965,20.8076,19,19.3281,19,17.5542c0-1.3203,0.6592-2.3511,1.2119-2.9834
		C21.3818,13.2324,22,11.6519,22,10c0-4.4111-4.4863-8-10-8S2,5.5889,2,10c0,1.6519,0.6182,3.2324,1.7881,4.5708
		C4.3408,15.2031,5,16.2339,5,17.6499z M12,4c4.4111,0,8,2.6914,8,6c0,1.1606-0.4473,2.2861-1.2939,3.2544
		C17.5898,14.5313,17,16.0181,17,17.6499c0,0.8042-0.5439,1.5186-1.3584,1.7788c-0.0784,0.0254-0.1589,0.043-0.2379,0.0667
		c-0.0024-0.0235,0-0.0469-0.0026-0.0704C15.353,18.95,15.2357,18.475,15,18c-0.1046-0.211-0.2766-0.3911-0.5038-0.5038
		C13.9439,17.2221,13.274,17.4477,13,18c-0.2357,0.475-0.353,0.95-0.4011,1.425c-0.0207,0.184-0.022,0.368-0.0204,0.552
		c-0.3953,0.019-0.7908,0.0189-1.1861-0.0013c0.0037-0.1836-0.0186-0.3671-0.025-0.5507C11.3259,18.95,11.2192,18.475,11,18
		c-0.106-0.2291-0.2914-0.4246-0.5386-0.5386C9.9091,17.2065,9.2548,17.4477,9,18c-0.2191,0.475-0.3259,0.95-0.3674,1.425
		c-0.0009,0.0264-0.0029,0.0526-0.0044,0.079c-0.0909-0.027-0.1835-0.0475-0.2737-0.0767C7.5439,19.1685,7,18.4541,7,17.5542
		c0-1.5361-0.5898-3.0229-1.7061-4.2998C4.4473,12.2861,4,11.1606,4,10C4,6.6914,7.5889,4,12,4z"
      ></path>
      <path
        d="M8.5 13c1.38 0 2.5-1.12 2.5-2.5 0-.31-.06-.61-.17-.89L7.17 8.39C6.47 8.83 6 9.61 6 10.5 6 11.88 7.12 13 8.5 13zM15.5 13c1.38 0 2.5-1.12 2.5-2.5 0-.89-.47-1.67-1.17-2.11l-3.66 1.22C13.06 9.89 13 10.19 13 10.5 13 11.88 14.12 13 15.5 13z"
      ></path>
    </g>
  </svg>
</button>

<style scoped lang="scss">
  .button {
    box-sizing: border-box;
    display: flex;
    padding: 4px;
    margin-left: auto;
    border-radius: 50%;
    transition: transition(background-color, short4, emphasized);

    &:hover {
      background-color: rgba(0, 0, 0, 0.06);
    }
    &:active {
      background-color: rgba(0, 0, 0, 0.12);
    }
  }

  .icon {
    width: 24px;
    height: 24px;
  }
</style>
